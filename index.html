<!DOCTYPE html>
<!--[if IE 7]>
<html lang="en" data-ng-app="main" id="ng-app" class="no-js ie"></html>
<![endif]-->
<!--[if IE 8]>
<html lang="en" data-ng-app="main" id="ng-app" class="no-js ie"></html>
<![endif]-->
<!--[if IE 9]>
<html lang="en" data-ng-app="main" id="ng-app" class="no-js ie9"></html>
<![endif]-->
<!--if [(gt IE 9)|!(IE)] <!-->
<html ng-app="main" class="no-js">
  <!-- <![endif]-->
  <head>
    <meta charset="utf-8">
    <title>Gradle Introduction</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Gradle Introduction 2013">
    <link href="./assets/css/style.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <section data-state="index-slide" class="index-section"><img src="assets/img/goldilocks.jpg">
            <h2>Goldilocks would use gradle </h2>
            <div>an introduction to gradle </div>
            <div>by Matt Payne</div>
            <div>10/15/2013</div>
            <ul>
              <h6>Updated Tue Nov  5 12:13:14 CST 2013</h6>
            </ul>
          </section>
          <section>
            <h2><i class="icon-github"></i></h2>
            <ul>
              <li>These slides are up on GitHub!  </li>
              <ul>
                <li> <a href="http://payne.github.io/GradleIntro2013" target="_blank">payne.github.io/GradleIntro2013</a></li>
              </ul>
              <li>Source for these slides is also on GitHub </li>
              <ul> 
                <li><a href="https://github.com/payne/GradleIntro2013" target="_blank">github.com/payne/GradleIntro2013</a></li>
              </ul>
              <li>This slide deck started life as a clone of Jeff Sheets' August 2013 talk</li>
              <ul>
                <li> <a href="http://jeffsheets.github.io/JavaTesting2013Slides" target="_blank">jeffsheets/JavaTesting2013Slides</a></li>
                <ul>
                  <li>Many, many thanks Jeff!</li>
                </ul>
              </ul>
            </ul>
          </section>
          <section>
            <h2>About Me</h2>
            <ul>
              <li>
                 
                Software Engineer at <a href="http://www.Solutionary.com" target="_blank">Solutionary</a>
              </li>
              <li> <i class="icon-twitter">&nbsp;</i><a href="https://twitter.com/MattPayneOrg" target="_blank">@MattPayneOrg</a></li>
              <li> <i class="icon-github">&nbsp;</i><a href="https://github.com/payne" target="_blank">@payne</a>
                <li> <a href="http://MattPayne.org/" target="_blank">http://MattPayne.org</a></li>
                <li>Payne@MattPayne.org</li>
              </li>
            </ul>
          </section>
        </section>
        <section>
          <h2>Talk Outline </h2>
          <ol>
            <li>5WH: What, Why, Where, Who, When, and How</li>
            <li>Using and demoing gradle <i class="icon-smile"></i></li>
            <ol>
              <!--TODO: type=a-->
              <li>From scatch</li>
              <li>Eclipse Plugin</li>
              <li>What about maven and ant?</li>
              <li>Multiproject builds</li>
              <li>Multiple language builds</li>
            </ol>
            <li>Review shortcuts, tips, and tricks</li>
            <li>Maven broken?</li>
            <li>gradle-1.7/samples</li>
            <li>References</li>
            <hr>
            <h3>Please ask questions and make suggestions!</h3>
            <ul>
              <li>"Everyone in this room is an expert!" 
                <ul>
                  <li>Jeff Sheets' great observation from 8/20/2013</li>
                </ul>
              </li>
            </ul>
          </ol>
        </section>
        <section>
          <section>
            <h2>What is gradle?</h2>
            <h3>Google points to gradle's wikipedia entry:</h3>
            <p>Gradle is a project automation tool that builds upon the concepts of Apache Ant and Apache Maven and introduces a Groovy-based DSL instead of the more traditional XML form of declaring the project configuration. -- <a href="http://en.wikipedia.org/wiki/Gradle" target="_blank">http://en.wikipedia.org/wiki/Gradle</a></p>
            <hr>
            <h3>I say:</h3>
            <ol>
              <li>don't prototype with maven: use gradle.   </li>
              <li>When you have a choice between ant, maven, and gradle: choose gradle.</li>
            </ol>
          </section>
          <section>
            <h2>There are lots of build systems</h2>
            <p>Build tools recognized by Search.Maven.org</p>
            <ol>
              <li>Maven</li>
              <li>Buildr</li>
              <li>Ivy</li>
              <li>Google Grape</li>
              <li>Grails (aka Gradle)</li>
              <li>Scala SBT</li>
            </ol>
            <p>and there are many more still...  For example <a href="http://docs.waf.googlecode.com/git/book_17/single.html" target="_blank">WAF</a></p>
            <ul>
              <li>Used by node.js and Samba.org</li>
            </ul>
          </section>
        </section>
        <section>
          <section>
            <h2>Why use gradle?</h2>
            <ol>
              <li>Gradle manifesto:</li>
              <div>Make the impossible possible, make the possible easy and make the easy elegant.
                <ul>
                  <li>(inspired by Moshe Feldenkrais)</li>
                </ul>
              </div>
            </ol>
          </section>
          <section>
            <h2>philosophy and theory</h2>
            <ol>
              <li> <a href="http://en.wikipedia.org/wiki/Technology_acceptance_model" target="_blank">Technology Acceptance Model (TAM) </a></li>
              <ul>
                <li>Perceived usefulness</li>
                <li>Perceived ease-of-use</li>
              </ul>
              <li>Network effect </li>
              <ul>
                <li><a href="http://en.wikipedia.org/wiki/Network_effect" target="_blank">the value of a product or service is dependent on the number of others using it.</a></li>
              </ul>
            </ol>
          </section>
        </section>
        <section>
          <h2>Where is gradle being used?</h2>
          <ol>
            <li>Adoption curves <a href="http://en.wikipedia.org/wiki/Technology_adoption_lifecycle" target="_blank"><img src="http://upload.wikimedia.org/wikipedia/en/4/45/DiffusionOfInnovation.png"></a></li>
            <li>Add the list of projects and companies that use gradle</li>
            <ul>
              <li>Hibernate, spring, spring source, Tahles, Siemens, LinkedIn, etc</li>
            </ul>
          </ol>
        </section>
        <section>
          <h2>Who is who in the gradle zoo?</h2>
          <ol> 
            <li> <a href="http://www.gradleware.com/team" target="_blank">http://www.gradleware.com/team</a></li>
            <li> <a href="http://GradleWare.com" target="_blank">GradleWare.com</a></li>
            <li>Tim Berglund -- Great books and articles</li>
          </ol>
        </section>
        <section>
          <h2>When is gradle ready to use?</h2>
          <h1>Now</h1>
          <ol> 
            <li>One can have gradle doing builds while ant or maven are also doing builds</li>
            <li> <a href="http://www.gradle.org/roadmap" target="_blank">Roadmap</a></li>
            <li><a href="http://www.gradle.org/events" target="_blank">Events</a></li>
          </ol>
        </section>
        <section>
          <section>
            <h2>How to get started using gradle? From...</h2>
            <ol> 
              <li>Command line</li>
              <li>Eclipse</li>
              <li>maven</li>
              <li>ant</li>
              <li>multi project</li>
              <li>multi language</li>
            </ol>
          </section>
          <section>
            <h2>Gradle on the command line</h2>
            <ol>
              <li>Hello world project</li>
              <li>Turning project into an eclipse project</li>
            </ol>
          </section>
          <section>
            <h2>First gradle: the source</h2>
            <div>Hello.java</div>
            <pre><code data-trim contenteditable>
package demo;

/* ... */
public class Hello {

  public static void main(String[] args) {
    System.out.format("Hello world\n");
  }
}
</code>
</pre>
          </section>
          <section>
            <h2>First gradle: the build file</h2>
            <div>build.gradle</div>
            <pre><code data-trim contenteditable>
apply plugin: 'java'
</code>
</pre>
          </section>
          <section>
            <h2>First gradle: the session</h2>
            <pre><code data-trim contenteditable>
mkdir -p src/main/java/demo
cat > src/main/java/demo/Hello.java 
cat > gradle.build
tree
gradle build
gradle build
gradle --daemon build
gradle build
java -cp build/libs/first.jar demo.Hello
</code></pre>
            <ol>
              <li>Let's note the timing differences
                <ul>
                  <li>Tip 1: gradle's daemon makes things "faster"</li>
                </ul>
              </li>
              <li>gradle build does several things
                <ul>
                  <li>Compile</li>
                  <li>Build jar</li>
                  <li>Run tests</li>
                  <li>Build test report</li>
                </ul>
              </li>
            </ol>
          </section>
          <section>
            <h2>That's a lot of files</h2>
            <ol> 
              <li>gradle clean; find * | wc -l # output 6</li>
              <li>gradle build; find * | wc -l # output 17</li><img src="assets/img/tree1.png">
            </ol>
          </section>
          <section>
            <h3>gradle tasks: That's a lot of tasks</h3>
            <h3>Not a lot of gradle</h3>
            <pre><code>
mpayne-mbp:first mpayne$ cat build.gradle 
apply plugin: 'java'
mpayne-mbp:first mpayne$
</code></pre>
          </section>
          <section>
            <h2>special tasks</h2>
            <h3>Build Setup tasks</h3>
            <ol>
              <li>setupBuild - Initializes a new Gradle build. [incubating]</li>
              <ul>
                <li>Generates directory tree and sample build file</li>
              </ul>
              <li>wrapper - Generates Gradle wrapper files. [incubating]
                <ul>
                  <li>Generates shell/batch script that downloads gradle for you.</li>
                  <li>Wonderful if you continous integration (CI) server does not directly support gradle.  Also if you want to share a script with someone who may not have gradle.</li>
                </ul>
              </li>
              <li>And, there's a gui: <b>gradle --gui</b></li>
            </ol>
          </section>
          <section>
            <h2>Dependency management: the source</h2>
            <div>MainDemoBeanUtils.java</div>
            <pre><code data-trim contenteditable>
package demo;
import org.apache.commons.beanutils.BeanUtils;

/* ... */
public class MainBeanUtilsDemo {
  private String jdbcDriverClass, dbUrl, dbUser, dbPassword;
  
  public MainBeanUtilsDemo(String[] args) throws FileNotFoundException,
    IOException, IllegalAccessException, InvocationTargetException {
    
    this.strPropertyFileName = args.length > 0 ? args[0] : "jdbc.properties";
    Properties properties = new Properties();
    properties.load(new FileReader(strPropertyFileName));
    BeanUtils.populate(this, properties); // remember the accessors
    System.out.format("user=%s password=%s\n", dbUser, dbPassword);
  }
}
</code>
</pre>
          </section>
          <section>
            <h4>Dependency management: the build file</h4>
            <div>build.gradle</div>
            <pre><code data-trim contenteditable>
apply plugin: 'java'
apply plugin: 'eclipse'
repositories { mavenCentral() }

dependencies { 
    compile 'commons-beanutils:commons-beanutils:1.8.3'
}
</code></pre>
            <h4>LMGTFY.com</h4>
            <ul> 
              <li>Just google <b>gradle package or library name</b> for example:</li>
              <ul>
                <li><a href="http://lmgtfy.com/?q=gradle+commons+beanutils&amp;l=1" target="_blank">gradle commons beanutils</a></li>
                <li>MVNrepository.com needs ad revenue...</li>
              </ul>
              <li> <a href="http://search.maven.org/#search%7Cga%7C1%7Ccommons%20beanutils" target="_blank">Maven.org is better</a></li>
            </ul>
          </section>
          <section>
            <h2>What is that jar?</h2>
            <div>google the sha1sum or md5 of an unknown jar to find out what it's maven coordinates are
              <ul>
                <li> <a href="https://www.google.com/#q=50110a98f45c966e662bd9fbcf38031a" target="_blank">50110a98f45c966e662bd9fbcf38031a</a></li>
              </ul>
            </div>
          </section>
          <section>
            <h2>Dependency management: the session</h2>
            <pre><code data-trim contenteditable>
mkdir -p src/main/java/demo # redundant
cat > src/main/java/demo/MainBeanUtilsDemo.java 
cat > gradle.build
echo 'org.gradle.daemon=true' > gradle.properties
gradle eclipse # So we can import this into eclipse and fix it up a bit.
gradle build # Don't need the --daemon now
</code></pre>
            <ol>
              <li>Tip 2: Use gradle.properties to always use the daemon
                <ul>
                  <li>gradle's daemon makes things "faster"</li>
                  <li><b>ps -ef | egrep -i 'gradle'</b></li>
                </ul>
              </li>
              <li> <a href="http://www.gradle.org/docs/current/userguide/build_environment.html" target="_blank">User Guide Chapter 20: The Build Environment</a></li>
            </ol>
          </section>
          <section>
            <h2>Using gradle's eclipse plugin</h2>
            <ol>
              <li>add "apply plugin: 'eclipse'" to your build.gradle</li>
              <li>gradle eclipse</li>
              <li>In eclipse, import existing eclipse project</li>
              <li>joy <i class="icon-smile"></i></li>
            </ol>
            <h2>Next, Using eclipse's gradle plugin</h2>
          </section>
          <section>
            <h2>Using eclipse's gradle plugin</h2>
            <ol>
              <li> <a href="http://www.gradle.org/tooling">Gradle tooling</a></li>
              <li> <a href="https://marketplace.eclipse.org/content/gradle-integration-eclipse">Gradle Integration for Eclipse</a></li>
              <ul>
                <li>I did not install the Spring Dashboard</li>
                <li>github.com/spring-projects/eclipse-integration-gradle/</li>
              </ul>
              <li> <img src="assets/img/eclipse-marketplace.png"></li>
            </ol>
          </section>
          <section>
            <h2>Dependency management: Running </h2>
            <ul> 
              <li>Let's use gradle to run our code </li>
              <li>Folks manage the classpath like this with ant and maven too...</li>
            </ul>
            <pre><code data-trim contenteditable>
defaultTasks 'BeanDemo'
apply plugin: 'java'
apply plugin: 'eclipse'
repositories { mavenCentral() }

dependencies { 
    compile 'commons-beanutils:commons-beanutils:1.8.3'
}

task BeanDemo(type: JavaExec) {
  main='demo.MainBeanUtilsDemo'
  classpath=runtimeClasspath
}
</code></pre>
            <ol>
              <li>gradle BeanDemo</li>
              <li>gradle BD</li>
              <ul>
                <li>Tip 3: The CamelCaseShortCut (CCSC)</li>
              </ul>
            </ol>
          </section>
          <section>
            <h2>maven</h2>
            <ol>
              <li>Gradle uses maven repos</li>
              <li>Gradle can publish to maven repos
                <ul>
                  <li> <a href="http://www.gradle.org/docs/current/userguide/maven_plugin.html" target="_blank">Use gradle's maven plugin</a></li>
                  <li>apply plugin: 'maven'</li>
                  <li>gradle install # publishes to local maven repo
                    <ul>
                      <li>This includes utilties to build a pom.xml for your artifact</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ol>
          </section>
          <section>
            <h2>maven: Converting a maven project</h2>
            <div>Let's convert a simple mvn project to gradle.   For example </div><a href="https://github.com/kohsuke/github-api">kohsuke/github-api</a>
            <ol>
              <li><b>git clone https://github.com/kohsuke/github-api.git</b></li>
              <li><b>cd github-api</b></li>
              <li><b>gradle setupBuild</b></li>
              <li><b>vim pom.xml</b> # Remove parent & move groupID to top </li>
              <li><b>less build.gradle</b></li>
            </ol>
          </section>
          <section>
            <h2>Reusing ant: ant.importBuild 'build.xml'</h2>
            <pre><code data-trim contenteditable>
task zip << {
  ant.zip(destfile: 'archive.zip') {
      fileset(dir: 'src') {
          include(name: '**.xml')
          exclude(name: '**.java')
      }
  }
}
</code></pre><a href="http://www.gradle.org/docs/current/userguide/ant.html" target="_blank">Many ant examples in the user guide</a><a href="http://stackoverflow.com/questions/17415284/gradle-cant-execute-an-ant-target" target="_blank">Example from StackOverflow</a>
          </section>
        </section>
        <section>
          <section> 
            <h2>Good things to know</h2>
            <ol>
              <li>Build life cycle</li>
              <li>Task api</li>
              <li>The DSL is on top of groovy.   So, all of groovy is there</li>
              <li>Groovy can be a lot like java</li>
            </ol>
          </section>
          <section> 
            <h2>Build Life Cycle</h2>
            <ol>
              <li>Initialization</li>
              <li>Configuration</li>
              <li>Execution</li>
            </ol>
            <div></div><a href="http://www.gradle.org/docs/current/userguide/build_lifecycle.html" target="_blank">Chapter 55: The Build Lifecycle</a>
          </section>
          <section> 
            <h2>Task API</h2>
            <ol>
              <li>build.gradle is a program</li>
              <li>tasks are objects</li>
            </ol>
          </section>
          <section> 
            <h2>Gradle DSL</h2>
            <ol>
              <li> <a href="http://www.gradle.org/docs/current/dsl/" target="_blank">Gradle DSL Reference</a></li>
              <li>a simple groovy example</li>
              <li>simple example java like</li>
            </ol>
          </section>
        </section>
        <section>
          <h2>Review shortcuts, tips, and tricks</h2>
          <ul>
            <li>Tip 1: daemon
              <ul>
                <li>gradle --daemon</li>
              </ul>
            </li>
            <li>Tip 2: gradle.properties</li>
            <ul>
              <li>org.gradle.daemon=-true</li>
            </ul>
            <li>Tip 3: The CamelCaseShortCut (CCSC)</li>
            <li>Tip 4: default task
              <ul>
                <li>defaultTasks 'BeanDemo' # can be a comma seperated list</li>
              </ul>
            </li>
            <li>apply from http</li>
            <ul>
              <li>common settings for projects on your whole team</li>
            </ul>
            <li>github.com/spring-projects/eclipse-integration-gradle/</li>
            <li><b>--parallel</b> option runs unit tests in parallel</li>
          </ul>
        </section>
        <section>
          <h2>Maven broken?</h2>
          <ol>
            <li>Some people think so</li>
            <li><a href="http://blog.ltgt.net/maven-is-broken-by-design/" target="_blank">Maven broken by design</a></li>
            <ul>
              <li>9/26/2013</li>
            </ul>
            <li>This is why Goldilocks would use gradle</li>
            <li>http://www.gradleware.com/news/blog/answering-more-gradle-v-maven-fud</li>
            <li>Is gradle perfect?  Of course not! <i class="icon-smile"></i></li>
            <li>Discussion?  Over beer?</li>
          </ol>
        </section>
        <section>
          <h2>gradle-1.7/samples</h2>
          <ol>
            <li>webApplication</li>
            <li>ear</li>
            <li>groovy</li>
            <li>java/multiproject</li>
            <li>java/quickstart</li>
            <li>java/customizedLayout</li>
            <li>java/withIntegrationTests
              <ul>
                <li>gradle integrationTest</li>
              </ul>
            </li>
          </ol>
        </section>
        <section>
          <h2>Free References</h2>
          <ol>
            <li> <a href="http://www.gradle.org/learn" target="_blank">http://www.gradle.org/learn</a></li>
            <li> <a href="http://mrhaki.blogspot.com" target="_blank">http://mrhaki.blogspot.com</a></li>
            <li> <a href="http://www.gradle.org/book" target="_blank">gradle.org/book</a></li>
          </ol>
        </section>
      </div>
    </div>
    <script src="./assets/js/app.js"></script>
  </body>
</html>